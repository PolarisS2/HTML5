<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>


*{
    background-color: bisque;
}
input{
    background-color: aqua;
    border-radius: 10px;
}
button{
    background-color: green;
    color: white;
    width: 20%;
    border-radius: 20px;
}

</style>

<body>
    <script src='baseball.js'></script>
</body>
</html>

<script>
    //기본 변수선언 & 문제를 만드는 함수작성
var body = document.body;
var nums;
var num_ary;
const make_Question = () => {
    nums = [1,2,3,4,5,6,7,8,9];
    num_ary = [];
    for(var i=0; i<4; i+=1){
        var outed = nums.splice(Math.floor(Math.random() * (9-i)), 1)[0];
        num_ary.push(outed);
    }
}
//문제를 만들고, HTML 만들기.
make_Question();
var result = document.createElement('h1');
body.append(result);
var fom = document.createElement('form');
document.body.append(fom);
var input_blank = document.createElement('input');
fom.append(input_blank);
input_blank.type = 'text';
input_blank.maxLength = 4;
var button = document.createElement('button');
button.textContent = '입력!';
fom.append(button);

console.log(num_ary); //정답을 모르니, 정답을 콘솔창에 출력하긔..


//사용자가 정답을 입력했을 때 작동할 로직.
var wrong = 0;
fom.addEventListener('submit', function(event) {
    event.preventDefault();
    var user_answer = input_blank.value;
    if(user_answer === num_ary.join('')){
        result.textContent = '홈런!';
        input_blank.value = '';
        input_blank.focus();
        make_Question();
        wrong = 0;
    } else {
        var answer_ary = user_answer.split('');
        var strike = 0;
        var ball = 0;
        wrong += 1;
        if(wrong > 10){
            result.textContent = "실패! 정답은" +num_ary.join('')+'입니다!' ;
            input_blank.value = '';
            input_blank.focus();
            make_Question();
            wrong = 0;
        } else {
            for(var i=0; i<3; i+=1){
                if(Number(answer_ary[i]) === num_ary[i]){
                    strike += 1;
                } else if(num_ary.indexOf(Number(answer_ary[i]) > -1)){
                    ball += 1;
                }
            }
            result.textContent = strike + '스트라이크' + ball + '볼 입니다. 현재 남은 횟수' + (10 - wrong)
            input_blank.value = '';
            input_blank.focus();
        }
    }    
})


    
</script>

